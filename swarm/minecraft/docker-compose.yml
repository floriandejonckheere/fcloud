version: "3.8"

services:
  ##
  # Minecraft
  #
  minecraft:
    image: itzg/minecraft-server
    volumes:
      - /mnt/default/minecraft/:/data
    ports:
      - "0.0.0.0:25565:25565"
    environment:
      SERVER_NAME: Thalarion
      MOTD: Welcome to Thalarion MC server
      DIFFICULTY: easy
      ENFORCE_WHITELIST: "TRUE"
      WHITELIST: DeathByCookie,shitbrix
      OPS: DeathByCookie,shitbrix
      MAX_PLAYERS: 10
      ONLINE_MODE: "TRUE"
      # Check latest version on https://www.minecraft.net/en-us/download/server
      VERSION: 1.16.4
      MEMORY: 15G
      LEVEL: 20200920_1.16.3
      EULA: "TRUE"
      USE_AIKAR_FLAGS: "TRUE"
      USE_LARGE_PAGES: "TRUE"
      SNOOPER_ENABLED: "FALSE"
      OVERRIDE_SERVER_PROPERTIES: "TRUE"
      TZ: Europe/Berlin
    deploy:
      placement:
        constraints:
          - node.hostname==minecraft
      restart_policy:
        condition: on-failure
